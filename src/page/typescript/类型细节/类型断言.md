åœ¨ TS ä¸­ç±»å‹æ–­è¨€å¯ä»¥ç”¨æ¥æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªå€¼çš„ç±»å‹ã€‚åœ¨ä½¿ç”¨ TS çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä¸€ç§æƒ…å†µï¼šæˆ‘æ¯” TS æ›´åŠ æ¸…æ¥šè¿™ä¸ªå€¼çš„ç±»å‹ã€‚

æ¯”å¦‚æˆ‘ä»å¼‚æ­¥è¯·æ±‚ä¸­æ‹¿åˆ°ä¸€ä¸ªç±»å‹ä¸º`any`çš„å€¼ï¼Œä½†æˆ‘æ¸…æ¥šçš„çŸ¥é“è¿™ä¸ªå€¼å°±æ˜¯`string`ç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘å¯ä»¥é€šè¿‡ç±»å‹æ–­è¨€æ–¹å¼å‘Šè¯‰ç¼–è¯‘å™¨ï¼šè¿™å°±æ˜¯ä¸€ä¸ª`string`ç±»å‹ã€‚



## <font style="background-color:#74B602;"> </font> è¯­æ³•
è¯­æ³•ï¼š

```typescript
å€¼ as ç±»å‹
// æˆ–è€…
<ç±»å‹>å€¼ 
```

ç¤ºä¾‹ï¼š

```typescript
let someValue: any = "this is a string";
let strLength1 = (<string>someValue).length;
let strLength2 = (someValue as string).length
```

<br/>warning
âš ï¸ æ³¨æ„

åœ¨ tsx ä¸­åº”ä¼˜å…ˆä½¿ç”¨`å€¼ as ç±»å‹`çš„è¯­æ³•ã€‚

<br/>



## <font style="background-color:#74B602;"> </font> ç”¨é€”
**<font style="background-color:#F9EFCD;">è”åˆç±»å‹æ–­è¨€ï¼š</font>**

```typescript
type MyType = string | number | boolean;

function getLength(type: MyType) {
    console.log(type.length); // âŒ ç±»å‹â€œnumberâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œlengthâ€
    console.log((type as string).length); // âœ…
}
getLength("Hello World");
```

```typescript
type Student = { name: string; score: number };
type Teacher = { name: string; age: number; subject: string };
type Person = Student | Teacher;

function print(person: Person) {
    // é»˜è®¤åªèƒ½è®¿é—®åˆ° .name å±æ€§
    console.log(person.name); // âœ…
    console.log(person.score); // âŒ ç±»å‹â€œTeacherâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œscoreâ€
    console.log((person as Student).score); // âœ…
}
print({ name: "John", score: 100 });
```

ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ç±»å‹æ–­è¨€æ˜¯æœ‰å¾ˆæ˜æ˜¾çš„ç±»å‹å®‰å…¨éšæ‚£çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦è‡ªå·±æ˜ç¡®çš„çŸ¥é“ç¡®å®å¯ä»¥è¿›è¡Œæ–­è¨€ï¼Œåœ¨è¿›è¡Œæ“ä½œã€‚



**<font style="background-color:#F9EFCD;">çˆ¶ç±»å‹æ–­è¨€ä¸ºå­ç±»å‹ï¼š</font>**

```typescript
class Animal {
    eat() {
        console.log("animal eat");
    }
}

class Dog extends Animal {
    eat() {
        console.log("dog eat");
    }
    bark() {
        console.log("dog bark");
    }
}

class Cat extends Animal {
    eat() {
        console.log("cat eat");
    }
    meow() {
        console.log("cat meow");
    }
}

function feed(animal: Animal) {
    (animal as Cat).meow(); // âœ…
}
```

ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†`animal`æ–­è¨€ä¸º`Cat`è¿™ä¸ªå­ç±»å‹ï¼ŒåŒæ ·æ˜¯å­˜åœ¨å®‰å…¨éšæ‚£çš„ã€‚ä¸ºäº†åšåˆ°ç±»å‹çš„å®‰å…¨ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨`instanceof`æ¥è¿›è¡Œæ§åˆ¶æµåˆ†æï¼š

```typescript
function feed(animal: Animal) {
    if (animal instanceof Dog) {
        animal.bark(); // âœ…
    } else if (animal instanceof Cat) {
        animal.meow(); // âœ…
    } else { 
        animal.eat(); // âœ…
    }
}
```



å¦‚æœè¯´ä½ çœŸçš„éå¸¸ç¡®å®šä¸€ä¸ªå€¼çš„ç±»å‹ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€ï¼Œä¾‹å¦‚å¸¸è§çš„å¯¹ DOM çš„æ“ä½œï¼š

```typescript
const inputDom = document.querySelector("input");

inputDom!.addEventListener("change", e => { 
  console.log((e.target as HTMLInputElement).value);
})
```



**<font style="background-color:#F9EFCD;">å°†ä»»ä½•ä¸€ä¸ªç±»å‹æ–­è¨€ä¸º</font>**`**<font style="background-color:#F9EFCD;">any</font>**`**<font style="background-color:#F9EFCD;">:</font>**

```typescript
const obj = {
  name: 'jack',
  age: 18
}
obj.sex = "ç”·"; // âŒ ç±»å‹â€œ{ name: string; age: number; }â€ä¸Šä¸å­˜åœ¨å±æ€§â€œsexâ€
console.log(obj.sex) // âŒ ç±»å‹â€œ{ name: string; age: number; }â€ä¸Šä¸å­˜åœ¨å±æ€§â€œsexâ€
```

æœ‰æ—¶å€™ï¼Œå½“æˆ‘ä»¬å¼•ç”¨ä¸€ä¸ªåœ¨æ­¤ç±»å‹ä¸Šä¸å­˜åœ¨çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå°±ä¼šæŠ¥é”™ã€‚

é‚£ä¹ˆæˆ‘ä»¬ç¡®å®éœ€è¦è¿›è¡Œèµ‹å€¼æ”¹æ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥å°†`obj`æ–­è¨€ä¸º`any`ç±»å‹ï¼š

```typescript
(obj as any).sex = "ç”·";
console.log((obj as any).sex);
```

ä¸€ä¸ªæ›´åŠ å¸¸è§çš„æ¡ˆä¾‹ï¼Œé‚£å°±æ˜¯å¾€`window`å¯¹è±¡ä¸Šæ·»åŠ å±æ€§æˆ–è€…æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™åŒæ ·ä¼šæŠ¥é”™ï¼š

```typescript
window.foo = 1; // âŒ ç±»å‹â€œWindow & typeof globalThisâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œfooâ€
```

æ­¤æ—¶æˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨`as any`ä¸´æ—¶å°†`window`æ–­è¨€ä¸º`any`ç±»å‹ï¼š

```typescript
(window as any).foo = 1;
```



<br/>warning
âš ï¸ æ³¨æ„

æˆ‘ä»¬ä¸èƒ½æ»¥ç”¨ `as any`ï¼Œä½†æ˜¯ä¹Ÿä¸è¦å®Œå…¨å¦å®šå®ƒçš„ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç±»å‹çš„ä¸¥æ ¼æ€§å’Œå¼€å‘çš„ä¾¿åˆ©æ€§ä¹‹é—´æŒæ¡å¹³è¡¡ã€‚

<br/>



**<font style="background-color:#F9EFCD;">å°†</font>**`**<font style="background-color:#F9EFCD;">any/unknown</font>**`**<font style="background-color:#F9EFCD;">æ–­è¨€ä¸ºä¸€ä¸ªå…·ä½“çš„ç±»å‹ï¼š</font>**

åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸å¯é¿å…çš„éœ€è¦å¤„ç†`any/unknown`ç±»å‹çš„å˜é‡ï¼Œè¿™äº›å˜é‡å¯èƒ½æ˜¯ç¬¬ä¸‰æ–¹åº“æœªèƒ½å®šä¹‰å¥½è‡ªå·±çš„ç±»å‹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å†å²é—ç•™çš„é—®é¢˜ã€‚

é‡åˆ°`any/unknown`ç±»å‹å˜é‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»å‹æ–­è¨€æŠŠ`any/unknown`æ–­è¨€ä¸ºæ›´åŠ ç²¾ç¡®çš„ç±»å‹ï¼š

```typescript
// ç¬¬ä¸‰æ–¹ API æˆ–è€…å†å²é—ç•™å‡½æ•°
function getData(id: number): any {
    // æ¨¡æ‹Ÿï¼šæ ¹æ®idè·å–çš„å¯¹è±¡æ•°æ®
    // ......
    return { id: 1, name: "jack", age: 18 };
}

interface User {
    id: number;
    name: string;
    age: number;
}

const user = getData(1) as User;
console.log(user.name);
```



**<font style="background-color:#F9EFCD;">ç±»å‹æ–­è¨€çš„é™åˆ¶ï¼š</font>**

å¹¶ä¸æ˜¯ä»»ä½•ä¸€ç§ç±»å‹éƒ½å¯ä»¥æ–­è¨€ä¸ºå¦å¤–ä¸€ç§ç±»å‹ï¼š

```typescript
let str = "123";
let n = str as number; // âŒ ç±»å‹ "string" åˆ°ç±»å‹ "number" çš„è½¬æ¢å¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¸¤ç§ç±»å‹ä¸èƒ½å……åˆ†é‡å ã€‚å¦‚æœè¿™æ˜¯æœ‰æ„çš„ï¼Œè¯·å…ˆå°†è¡¨è¾¾å¼è½¬æ¢ä¸º "unknown"
```

å¦‚æœå°†ä¸¤ä¸ªæ²¡æœ‰å…³è”çš„ç±»å‹è¿›è¡Œæ–­è¨€è½¬åŒ–å°±ä¼šäº§ç”Ÿé”™è¯¯ï¼Œæ‰€ä»¥ä¸æ˜¯ä»€ä¹ˆæƒ…å†µä¸‹éƒ½å¯ä»¥è¿›è¡Œç±»å‹æ–­è¨€ã€‚å…·ä½“æ¥è¯´ï¼Œè‹¥`A`å…¼å®¹`B`ï¼Œé‚£ä¹ˆ`A`å°±èƒ½å¤Ÿè¢«æ–­è¨€ä¸º`B`ï¼Œ`B`ä¹Ÿèƒ½å¤Ÿæ–­è¨€ä¸º`A`ã€‚

```typescript
// ğŸ¤” let str1: "hello"
let str1: "hello" = "hello";
// ğŸ¤” let str2: string
let str2 = "hello";

// str2 = str1; // âœ…
// str2 = str1 as string; // âœ…

str1 = str2; // âŒ ä¸èƒ½å°†ç±»å‹â€œstringâ€åˆ†é…ç»™ç±»å‹â€œ"hello"â€
str1 = str2 as "hello"; // âœ…
```

å¯¹è±¡ç±»å‹ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š

```typescript
class Animal {
    eat() {
        console.log("animal eat");
    }
}

class Dog extends Animal {
    eat() {
        console.log("dog eat");
    }
    bark() {
        console.log("dog bark");
    }
}

let a: Animal = new Animal();
let d: Dog = new Dog();

// a = d; // å¯ä»¥ç›´æ¥èµ‹å€¼
d = a as Dog; // å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€, ä½†æ˜¯ä¸å®‰å…¨ Animal æ²¡æœ‰ bark æ–¹æ³•

d.eat();
d.bark(); // æ‰§è¡Œçš„æ—¶å€™ä¼šæŠ¥é”™
```



**<font style="background-color:#F9EFCD;">éç©ºæ–­è¨€ï¼š</font>**

å½“æˆ‘ä»¬ç¡®ä¿¡æŸä¸ªå€¼ä¸æ˜¯`null`æˆ–è€…`undefined`çš„æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨éç©ºæ–­è¨€ã€‚

å®åŠ› ï¼š

```typescript
let maybeString: string | null = "hello";
// ğŸ¤” let definitelyString: string
let definitelyString = maybeString!;
```

```typescript
function getRandom(length?: number) { 
  if (!length) {
    return undefined;
  }
  return Math.random().toString(36).slice(-length);
}

let s = getRandom(6);
// å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€
(s as string).charAt(0);
// ç”±äºå°±æ˜¯å­—ç¬¦ä¸²å’Œéç©ºçš„å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨éç©ºæ–­è¨€
s!.charAt(0);
```



**<font style="background-color:#F9EFCD;">åŒé‡æ–­è¨€ï¼š</font>**

æ—¢ç„¶ä»»ä½•ç±»å‹éƒ½å¯ä»¥æ–­è¨€ä¸º`any`ç±»å‹ï¼ˆæŸäº›æƒ…å†µä¸‹å¯ä»¥æ–­è¨€ä¸º`unknown`ï¼‰ï¼Œ`any/unknown`åˆå¯ä»¥æ–­è¨€ä¸ºä»»ä½•ç±»å‹ã€‚

é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨åŒé‡æ–­è¨€`as any as ç±»å‹`æ¥å°†ä»»ä½•ä¸€ä¸ªç±»å‹æ–­è¨€ä¸ºå¦å¤–ä¸€ä¸ªç±»å‹ï¼š

```javascript

```

```typescript
let str = "123Hello";
// let n = str as number; // âŒ ç±»å‹ "string" åˆ°ç±»å‹ "number" çš„è½¬æ¢å¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¸¤ç§ç±»å‹ä¸èƒ½å……åˆ†é‡å ã€‚å¦‚æœè¿™æ˜¯æœ‰æ„çš„ï¼Œè¯·å…ˆå°†è¡¨è¾¾å¼è½¬æ¢ä¸º "unknown"
let n = str as unknown as number;

console.log(typeof n); // string
```



è¿™æ ·å†™å…·æœ‰å¾ˆæ˜æ˜¾çš„ç±»å‹å®‰å…¨éšæ‚£é—®é¢˜ï¼Œç±»å‹æ–­è¨€å¹¶ä¸ç­‰äºç±»å‹è½¬åŒ–ï¼Œç¼–è¯‘ä¹‹åæ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œæ‰€ä»¥é€šè¿‡ tsc ç¼–è¯‘åæˆ‘ä»¬ä¼šå‘ç°ï¼Œå…¶å®å°±æ˜¯å°†å˜é‡`str`èµ‹å€¼ç»™äº†å˜é‡`n`:

```javascript
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
let str = "123Hello";
let n = str;
console.log(typeof n);
```



`**<font style="background-color:#F9EFCD;">as const</font>**`**<font style="background-color:#F9EFCD;">æ–­è¨€ï¼š</font>**

`as const`æ–­è¨€ç”¨äºæŒ‡ç¤º TS å°†ä¸€ä¸ªå˜é‡è§†ä¸ºå¸¸é‡ï¼Œå¹¶å…·æ­¤æ¨æ–­å‡ºå…·ä½“çš„ç±»å‹ã€‚**<font style="background-color:#F9EFCD;">å¹¶ä¸”ä½¿ç”¨</font>**`**<font style="background-color:#F9EFCD;">as const</font>**`**<font style="background-color:#F9EFCD;">çš„æ—¶å€™ï¼ŒTS ä¼šå°†æ•°ç»„è§†ä¸ºåªè¯»çš„å…ƒç»„ç±»å‹ï¼Œå¯¹è±¡çš„å±æ€§ä¹Ÿä¼šè¢«è§†ä¸ºåªè¯»å±æ€§ï¼Œ</font>**ä¸”å¯¹è±¡æˆ–æ•°ç»„ä¸­çš„å€¼ä¼šè¢«æ¨æ–­ä¸ºå­—é¢é‡ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€èˆ¬çš„ç±»å‹ï¼ˆå¦‚`string`ã€`number`ç­‰ï¼‰ã€‚

```typescript
// ğŸ¤” let a: "Hello"
let a = "Hello" as const;
a = "world"; // âŒ ä¸èƒ½å°†ç±»å‹â€œ"world"â€åˆ†é…ç»™ç±»å‹â€œ"hello"â€

// ğŸ¤” let arr: readonly [1, 2, 3]
let arr = [1, 2, 3] as const;

// ğŸ¤” let obj: { readonly x: 10; readonly y: 20; }
let obj = { x: 10, y: 20 } as const;

// å¯¹äºæ›´å¤æ‚çš„åµŒå¥—ä¸€æ ·èµ·ä½œç”¨
const user = {
    id: 1,
    name: "jack",
    address: {
        city: "æˆéƒ½",
        province: "å››å·"
    }
} as const;

/*
ğŸ¤”
const user: {
    readonly id: 1;
    readonly name: "jack";
    readonly address: {
        readonly city: "æˆéƒ½";
        readonly province: "å››å·";
    };
}
*/
```



`as const`ç»“åˆæ–¹æ‹¬å·è¿ç®—ç¬¦ï¼Œæœ‰çš„æ—¶å€™å¯ä»¥éå¸¸æ–¹ä¾¿çš„å¤„ç†ä¸€äº›çœ‹èµ·æ¥æ¯”è¾ƒå¤æ‚çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œéœ€è¦å°†æ•°ç»„ä¸­çš„å†…å®¹è½¬æ¢ä¸ºè”åˆç±»å‹ï¼š

```typescript
const roles = ["è§’è‰²åˆ—è¡¨", "ç”¨æˆ·åˆ é™¤", "ç”¨æˆ·æŸ¥è¯¢", "æƒé™è¯¦æƒ…"] as const;
// ğŸ¤” type Role = "è§’è‰²åˆ—è¡¨" | "ç”¨æˆ·åˆ é™¤" | "ç”¨æˆ·æŸ¥è¯¢" | "æƒé™è¯¦æƒ…"
type Role = typeof roles[number];
```

