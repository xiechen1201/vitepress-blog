æ³›å‹ç¡®å®ç»™æˆ‘ä»¬å¸¦æ¥äº†å¾ˆå¤šçš„ä¾¿åˆ©ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™çº¦æŸåŠ›å¤ªè–„å¼±ï¼Œé™åˆ¶å¤ªè¿‡äºå®½æ³›ã€‚ä¾‹å¦‚æˆ‘ä»¬éœ€è¦æ³›å‹`T`ï¼Œå¦‚æœè¿™ä¸ª`T`åªèƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡è€Œä¸èƒ½æ˜¯åŸºæœ¬çš„ç±»å‹ï¼Œæˆ–è€…è¿™ä¸ª`T`å¿…é¡»å…·æœ‰æŸä¸ªå±æ€§ï¼ˆä¾‹å¦‚`length`ï¼‰ï¼Œç›®å‰çš„æƒ…å†µæ³›å‹æ— æ³•è¿›è¡Œçº¦æŸã€‚

```typescript
function add<T>(a: T, b: T): T {
    return a + b; // âŒ è¿ç®—ç¬¦â€œ+â€ä¸èƒ½åº”ç”¨äºç±»å‹â€œTâ€å’Œâ€œTâ€
}
```

æˆ‘æƒ³é™åˆ¶`T`çš„ç±»å‹åªèƒ½æ˜¯`number`å’Œ`string`ç±»å‹è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ

<br />

TS åº”ç”¨äº† ES6 ä¸­`extends`è¿™ä¸ªç»§æ‰¿çš„å«ä¹‰ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªç±»å‹å’Œå¦å¤–ä¸€ä¸ªç±»å‹å…·æœ‰å…¼å®¹æ€§ï¼Œä»è€Œèµ·åˆ°çº¦æŸæ³›å‹çš„æ•ˆæœã€‚

```typescript
function getObj<T extends object>(obj: T) {
    return obj;
}

getObj(1); // âŒ ç±»å‹â€œnumberâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œobjectâ€çš„å‚æ•°
getObj({});
```

ä½¿ç”¨`extends`åå°±å¯ä»¥å¯¹æ³›å‹è¿›è¡Œçº¦æŸäº†ã€‚

æˆ–è€…æˆ‘æƒ³çº¦æŸæ³›å‹å¿…é¡»æ˜¯ä¸€ä¸ªå…·æœ‰`length`å±æ€§çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`extends`è¿›è¡Œçº¦æŸï¼š

```typescript
function getLength<T extends { length: number }>(obj: T) {
    return obj.length;
}

getLength("123"); // âœ…
getLength([1, 2, 3]); // âœ…
getLength({ length: 10 }); // âœ…
getLength({ name: "123" }); // âŒ å¯¹è±¡å­—é¢é‡åªèƒ½æŒ‡å®šå·²çŸ¥å±æ€§ï¼Œå¹¶ä¸”â€œnameâ€ä¸åœ¨ç±»å‹â€œ{ length: number; }â€ä¸­
```

<br />

å¦‚æœå­˜åœ¨å¤šä¸ªæ³›å‹ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š

```typescript
type ObjLength = {
    length: number;
};

// å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„ä¸¤ä¸ªå‚æ•°çš„é•¿åº¦ç›¸å‡ï¼Œè·å–é•¿åº¦çš„å·®
function compareLength<T extends ObjLength, U extends ObjLength>(a: T, b: U) {
    return a.length - b.length;
}

const result = compareLength([1, 2, 3, 4, 5], "abc");
console.log(result);
```

<br />

`extends`ä¹Ÿå¯ä»¥æ‹“å±•åˆ°å¯¹è±¡å­—é¢é‡ä¸Šï¼Œå…¶å®`extends`æœ¬èº«å°±æ˜¯ç»§æ‰¿çš„æ„æ€ï¼š

```typescript
type TreeNode = {
    value: string;
};

type LeafNode = TreeNode & {
    isLeaf: true;
};

type InnerNode = TreeNode & {
    children: TreeNode[];
};

const a: TreeNode = {
    value: "a"
};

const b: LeafNode = {
    value: "b",
    isLeaf: true
};

const c: InnerNode = {
    value: "c",
    children: [a, b]
};

function mapNode<T extends TreeNode>(node: T, calback: (value: string) => string) {
    return {
        ...node,
        value: calback(node.value)
    };
}

mapNode(b, (value) => value.toUpperCase());
mapNode(c, (value) => value.toUpperCase());
```

ä¸Šé¢çš„ç¤ºä¾‹ä¸­å¦‚æœ`mapNode`ä¸åŠ ä¸Šé™åˆ¶ï¼Œ`T`çš„ç±»å‹æ ¹æœ¬ä¸çŸ¥é“`node`å±æ€§æ˜¯å¦å…·æœ‰`value`å±æ€§ï¼Œæ— æ³•å®‰å…¨çš„ä½¿ç”¨ï¼Œè¿™ä¹Ÿå±äºä¸€ç§ã€Œç±»å‹å®ˆå«ã€ã€‚


##   æ–¹æ‹¬å·è¿ç®—ç¬¦

æœ‰äº›æ—¶å€™æˆ‘æƒ³å†™ä¸€ä¸ªç±»å‹ï¼Œä¾‹å¦‚`Message`ï¼Œå…¶å¯ä»¥æ¥å—ä¸€ä¸ªæ³›å‹ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯ä»æ³›å‹ä¸Šè¯»å–æ³›å‹çš„`message`å±æ€§çš„ç±»å‹ï¼Œæˆ‘å¯èƒ½ä¼šè¿™ä¹ˆå†™ï¼š

```typescript
type Message<T> = T['message'] // âŒ ç±»å‹â€œ"message"â€æ— æ³•ç”¨äºç´¢å¼•ç±»å‹â€œTâ€
```

è¿™æ˜¯å› ä¸ºæ³›å‹`T`å¹¶ä¸çŸ¥é“`message`å±æ€§æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨æ³›å‹çº¦æŸã€‚

```typescript
type Message<T extends { message: unknown }> = T['message']

const person = {
  id:1,
  message:"hello"
}

// typeof person å¾—åˆ°çš„æ˜¯ä¸€ä¸ªç±»å‹
// { id: number; message: string; }
// ä¸èƒ½ç›´æ¥ä¼ é€’ Message<person>ï¼Œå› ä¸º person æ˜¯ä¸€ä¸ªå˜é‡è€Œä¸æ˜¯ç±»å‹ï¼
// ä¹Ÿå¯ä»¥å°† typeof person æå–ä¸ºä¸€ä¸ªç±»å‹åˆ«ååœ¨ä¼ é€’ç»™ Message<>
type PersonMessage = Message<typeof person> // string
```

##   å…ƒç»„çš„ç±»å‹æ¨å¯¼

åœ¨ TS ä¸­ï¼Œå¦‚æœç›´æ¥å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒé€šå¸¸ä¼šè¢«æ¨å¯¼ä¸ºä¸€ä¸ªå®½æ³›çš„æ•°ç»„ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸¥æ ¼çš„å…ƒç»„ç±»å‹ã€‚

```typescript
const a = [1, true]; // (number | boolean)[]
```

ç„¶åæœ‰çš„æ—¶å€™æˆ‘å¸Œæœ›æ¨å¯¼çš„ç»“æœæ›´åŠ çš„ä¸¥æ ¼ä¸€äº›ï¼ŒæŠŠ`a`çš„ç±»å‹æ¨å¯¼ä¸ºå…ƒç»„è€Œä¸æ˜¯æ•°ç»„ã€‚å½“ç„¶æˆ‘å¯æ˜¯ä½¿ç”¨`as const`è®©è¿™ä¸ªæƒ³æ³•æˆç«‹ï¼š

```typescript
const a = [1, true] as const; // readonly [1, true]
```

é™¤äº†è¿™ç§æ–¹å¼ï¼Œæˆ‘è¿˜å¯ä»¥ä½¿ç”¨ TS æ¨å¯¼å‰©ä½™å‚æ•°ç±»å‹çš„æ–¹å¼ï¼š

```typescript
function tuple<T>(...ts: T[]) {
    return ts;
}

// ğŸ¤” const t: number[]
const t = tuple(1, 2, 3, 4);
```

ä½†å¥½åƒè¿˜æ˜¯ä¸å¯¹ï¼Œå¾—åˆ°çš„ç±»å‹æ˜¯`number[]`è€Œä¸æ˜¯å…ƒç»„ã€‚

ä½†æ˜¯å¦‚æœä½¿ç”¨`extends`æ¥ç»§æ‰¿ä¸€ä¸ª`nuknown[]`ç±»å‹çš„æ•°ç»„ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå…ƒç»„ï¼š

```typescript
function tuple<T extends unknown[]>(...ts: T) {
    return ts;
}

// ğŸ¤” const t: [number, number, number, number]
const t = tuple(1, 2, 3, 4); 
```

ã€Œæ³›å‹çº¦æŸ`T extends unknown[]`ã€ä¸­çš„`T`è¢«çº¦æŸä¸ºä¸€ä¸ªæ‹“å±•è‡ª`unknown[]`çš„ç±»å‹ã€‚è¿™æ„å‘³ç€`T`å¯ä»¥æ˜¯`unknown[]`çš„ä»»ä½•å­ç±»å‹ï¼ŒåŒ…æ‹¬å…ƒç»„ç±»å‹ã€‚

ã€Œå‰©ä½™å‚æ•°`(...ts: T)`ã€å½“ä½¿ç”¨`...`æ“ä½œç¬¦ä½œä¸ºå‡½æ•°å‚æ•°çš„æ—¶å€™ï¼Œå®ƒåœ¨è¿è¡Œçš„æ—¶å€™è¡¨ç°ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯åœ¨ç±»å‹å±‚é¢ TS èƒ½å¤Ÿä¿ç•™ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ç±»å‹çš„ç²¾ç¡®æ€§ï¼Œæ¯”å¦‚å‚æ•°çš„ç±»å‹å’Œæ•°é‡ã€‚

å½“ TS æ¨å¯¼æ³›å‹çš„æ—¶å€™ï¼Œå®ƒä¼šå°½å¯èƒ½ç²¾ç¡®æ¨å¯¼å‡ºç±»å‹ã€‚åœ¨å‡½æ•°ä¸­`...`å‰©ä½™å‚æ•°å¯ä»¥æºå¸¦å‚æ•°çš„ç±»å‹é¡ºåºä¿¡æ¯ï¼Œè¿™ä¸ºå…ƒç»„çš„æ¨å¯¼æä¾›äº†æ¡ä»¶ã€‚

æ¨å¯¼è¿‡ç¨‹ï¼š

1. `...ts`æ”¶é›†å‚æ•°`(1, 2, 3, 4)`ï¼›
2. æ£€æŸ¥å‚æ•°çš„é¡ºåºå’Œç±»å‹ï¼š`number, number, number, number`ï¼›
3. é¡ºåºæ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å¯ä»¥è¡¨ç¤ºä¸º`[number, number, number, number]`;
4. `T`è¢«æ¨å¯¼ä¸º`[number, number, number, number]`ï¼Œå› ä¸ºè¿™ä¸ªç±»å‹ç¬¦åˆ`unknown[]`çš„çº¦æŸï¼›

TS å°†`T`æ¨å¯¼ä¸ºå…ƒç»„ç±»å‹çš„æ„ä¹‰åœ¨äºå¯ä»¥æä¾›æ›´é«˜çš„ç±»å‹ç²¾åº¦å’Œå®‰å…¨æ€§ã€‚

<br />

è¿™æ„å‘³ç€å½“æˆ‘ä½¿ç”¨`tuple()`å‡½æ•°çš„æ—¶å€™ï¼ŒTS ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ ç»™å‡½æ•°çš„å…·ä½“å‚æ•°æ¥æ¨å¯¼`T`çš„å…·ä½“ç±»å‹ï¼Œè¿™ä¸ªç±»å‹æ˜¯ä¸€ä¸ªå…ƒç»„ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®½æ³›çš„æ•°ç»„ç±»å‹ï¼š

```typescript
const myTuple1 = tuple(1, 'hello', true); // æ¨å¯¼ä¸ºå…ƒç»„ç±»å‹ [number, string, boolean]
const myTuple2 = tuple(...["èµ„æ–™ç®¡ç†å‘˜","æƒé™ç®¡ç†å‘˜","ç»ç†"]); // [string, string, string]
```

