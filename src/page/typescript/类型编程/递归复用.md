åŠ å…¥ç°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼šéœ€è¦å°†å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ä¸­çš„æ¯ä¸ªå€¼ç±»å‹å–å‡ºæ¥ï¼Œç„¶åç»„æˆä¸€ä¸ªè”åˆç±»å‹ã€‚ä¾‹å¦‚ï¼š

```typescript
type A = "12345";
// è½¬å˜ä¸º
type B = "1" | "2" | "3" | "4" | "5";
```

åˆ†æè¿™ä¸ªéœ€æ±‚ï¼Œå¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦ä¸å˜ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨`infer`æ¥è¿›è¡Œç±»å‹æ¨æ–­ï¼š

```typescript
type A = "12345";

type StringToUnion<S extends string> =
    // å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸º 5 ä¸ªå­—ç¬¦
    S extends `${infer One}${infer Two}${infer Three}${infer Four}${infer Five}`
        // ç„¶åç»„åˆæˆä¸€ä¸ªè”åˆç±»å‹
        ? One | Two | Three | Four | Five
        : never;

// ğŸ¤” type B = "1" | "2" | "3" | "4" | "5"
type B = StringToUnion<A>;
```

<br />

é‚£å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦ä¸å›ºå®šæ€ä¹ˆåŠå‘¢ï¼Ÿéš¾é“è¿˜è¦ä¸€ä¸ªä¸€ä¸ªçš„è¿›è¡Œæ‹†åˆ†å—ï¼Ÿæ˜¾ç¤ºæ˜¯ä¸åˆç†çš„ã€‚

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨é€’å½’å¤ç”¨ã€‚<XTextLight>å½“å¤„ç†æ•°é‡è¾ƒå¤šç±»å‹çš„æ—¶å€™ï¼Œå¯ä»¥åªå¤„ç†ä¸€ä¸ªç±»å‹ï¼Œç„¶åé€’å½’çš„è°ƒç”¨è‡ªèº«å¤„ç†ä¸‹ä¸€ä¸ªç±»å‹ï¼Œç›´åˆ°ç»“æŸæ¡ä»¶ã€‚</XTextLight>

```typescript
type A = "12345";

type StringToUnion<S extends string> =
        S extends `${infer One}${infer Rest}`
        ? One | StringToUnion<Rest>
        : never;

type B = StringToUnion<A>;

/*
  "12345" â†’ "1" | StringToUnion<"2345">
  "2345" â†’ "2" | StringToUnion<"345">
  "345" â†’ "3" | StringToUnion<"45">
  "45" â†’ "4" | StringToUnion<"5">
  "5" â†’ "5" | StringToUnion<"">
  "" â†’ never
*/
```

é€’å½’çš„æ‰§è¡Œè¿‡ç¨‹ï¼š

+ è¾“å…¥`S = "12345"`ï¼Œæ¨¡å¼åŒ¹é…`"12345" extends ${infer One}${infer Rest}`ï¼Œæ¡ä»¶æ»¡è¶³å¾—åˆ°`"1" | StringToUnion<"2345">`;

+ è¿›è¡Œé€’å½’ï¼Œå¼€å§‹ç¬¬äºŒå±‚å¾ªç¯ã€‚è¾“å…¥`S = "2345"`ï¼Œæ¨¡å¼åŒ¹é…`"2345" extends ${infer One}${infer Rest}`ï¼Œæ¡ä»¶æ»¡è¶³å¾—åˆ°`"2" | StringToUnion<"345">`;
+ è¿›è¡Œé€’å½’ï¼Œå¼€å§‹ç¬¬ä¸‰å±‚å¾ªç¯...ï¼›

+ ç›´åˆ°è¾“å…¥`S = ""`çš„æ—¶å€™ï¼Œ`extends`æ¡ä»¶ä¸æ»¡è¶³ï¼Œè¿”å›`never`ï¼Œé€æ­¥è¿”å›ï¼Œåˆå¹¶ç»“æœ`"1" | "2" | "3" | "4" | "5" | never`ï¼›

+ `never`åœ¨è”åˆç±»å‹ä¸­æ˜¯æ— æ•ˆçš„ï¼Œå¯ä»¥è¢«å¿½ç•¥ï¼Œæ‰€ä»¥æœ€ç»ˆå¾—åˆ°`"1" | "2" | "3" | "4" | "5"`ï¼›

<br />

å’Œå­—ç¬¦ä¸²å­—é¢é‡å¾ˆç±»ä¼¼çš„ï¼Œå¦‚æœä¸€ä¸ªæ•°ç»„è¦åšä¸€äº›ç±»ä¼¼çš„ç±»å‹å¤„ç†ï¼Œä¸€æ ·å¯ä»¥è¿›è¡Œé€’å½’ã€‚ä¾‹å¦‚æŠŠæ•°ç»„ä¸­çš„å…ƒç´ ç±»å‹å€’åºï¼š

```typescript
// ä¹‹å‰çš„å†™æ³•

type ReverseArr<T extends any[]> = 
    T extends [
      infer One,
      infer Two,
      infer Three,
      infer Four,
      infer Five
    ]
    ? [Five, Four, Three, Two, One]
    : never;

type Reversed = ReverseArr<[1, 2, 3, 4, 5]>; // [5, 4, 3, 2, 1]
```

```typescript
// ç°åœ¨çš„å†™æ³•
type ReverseArr<T extends any[]> = 
    T extends [infer One, ...infer Rest]
    ? [...ReverseArr<Rest>, One]
    : T; // æ³¨æ„ç»“æŸä¹‹åè¿”å›çš„æ˜¯æ•°ç»„

type Reversed = ReverseArr<[1, 2, 3, 4, 5]>; // [5, 4, 3, 2, 1]
```

<br />

å†æ¯”å¦‚é€šè¿‡ç¼–å†™ä¸€ä¸ªç±»å‹å·¥å…·ï¼Œè·å–å­—ç¬¦ä¸²å­—é¢ç±»å‹çš„é•¿åº¦ã€‚å®ç°è¿™ä¸ªå·¥å…·çš„æ€è·¯æ˜¯è®²å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„åï¼Œå†é€šè¿‡`T['length']`è·å–é•¿åº¦ã€‚

```typescript
type LengthOfString<S extends string, T extends string[] = []> = 
    S extends `${infer F}${infer R}`
    ? LengthOfString<R, [...T, F]>
    : T["length"];

type S = LengthOfString<"12345">; // 5


/*
  LengthOfString<"12345", []>
  LengthOfString<"2345", ["1"]>
  LengthOfString<"345", ["1", "2"]>
  LengthOfString<"45", ["1", "2", "3"]>
  LengthOfString<"5", ["1", "2", "3", "4"]>
  LengthOfString<"", ["1", "2", "3", "4", "5"]>
*/
```

<br />

æˆ–è€…å°è£…ä¸€ä¸ªå·¥å…·å¯¹ç´¢å¼•æ˜ å°„ç±»å‹çš„æ·±é€’å½’ï¼Œå°†å±‚çº§è¾ƒæ·±çš„å¯¹è±¡ç±»å‹å…¨éƒ¨å±æ€§è½¬æ¢ä¸º`readonly`åªè¯»çš„ï¼š

```typescript
type User = {
  id: number,
  name: string,
  address: {
    province: string,
    city: {
      name: string
      street: string
    }
  }
}
```

å®˜æ–¹æä¾›çš„`Readonly`åªèƒ½æŠŠç¬¬ä¸€å±‚å±æ€§è½¬æ¢ä¸º`readonly`ï¼š

```typescript
// åªä¼šæŠŠç¬¬ä¸€å±‚çš„å±æ€§å˜ä¸º readonly
type ReadonlyUser = Readonly<User>;

/* 
    type ReadonlyUser = {
        readonly id: number;
        readonly name: string;
        readonly address: {
            province: string;
            city: {
                name: string;
                street: string;
            };
        };
    }
*/
```

å°è£…ä¸€ä¸ªç±»å‹å·¥å…·å®ç°æ·±å±‚é€’å½’ï¼š

```typescript
type DeepReadonly<T extends Record<string, any>> = {
    readonly [K in keyof T]: 
        // å¦‚æœé”®æ»¡è¶³ [key: string]: any çš„æ ¼å¼ï¼Œè¯´æ˜æ˜¯ä¸ªå¯¹è±¡
        T[K] extends Record<string, any>
        ? DeepReadonly<T[K]>
        : T[K];
};

type ReadonlyUser = DeepReadonly<User>;

/*
  type ReadonlyUser = {
      readonly id: number;
      readonly name: string;
      readonly address: DeepReadonly<{
          province: string;
          city: {
              name: string;
              street: string;
          };
      }>;
  }
*/
```

ä¸Šé¢ä»£ç ç»“æœä¸­`address`å¹¶æ²¡æœ‰çœ‹åˆ°æœ€ç»ˆçš„è½¬æ¢æ•ˆæœï¼Œè¿™æ˜¯å› ä¸º TS ä¸ºäº†ä¿è¯æ€§èƒ½ï¼Œå¹¶ä¸ä¼šåšæ·±å±‚çš„è®¡ç®—ã€‚

æœ‰ä¸€ä¸ªæ¯”è¾ƒå®ç”¨çš„æŠ€å·§ï¼Œå°±æ˜¯åœ¨æ¯”è¾ƒå¤æ‚çš„ç±»å‹è®¡ç®—å¤–ï¼Œå†åŒ…è£¹ä¸€å±‚ä»£ç ï¼š

```typescript
T extends any ? å…·ä½“ç±»å‹ä½“æ“ä»£ç  : never;
```

ä¾‹å¦‚ï¼š

```typescript
type DeepReadonly<T extends Record<string, any>> = T extends any
    ? 
    {
        readonly [K in keyof T]: 
            T[K] extends Record<string, any>
              ? DeepReadonly<T[K]>
              : T[K];
    }
    : never;

type ReadonlyUser = DeepReadonly<User>; 

//ç°åœ¨å¯ä»¥çœ‹åˆ°å…¨éƒ¨è®¡ç®—å®Œæˆçš„ç±»å‹æ•ˆæœ

/*
  type ReadonlyUser = {
      readonly id: number;
      readonly name: string;
      readonly address: {
          readonly province: string;
          readonly city: {
              readonly name: string;
              readonly street: string;
          };
      };
  }
*/
```