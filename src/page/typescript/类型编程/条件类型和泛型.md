æ¡ä»¶ç±»å‹ä¹Ÿå¯ä»¥å’Œæ³›å‹è¿›è¡Œç»“åˆï¼Œç„¶åç»„åˆå‡ºå¾ˆå¤šç±»å‹ç¼–ç¨‹çš„å¤„ç†ã€‚

<br />

ç¤ºä¾‹ï¼šå®šä¹‰ä¸€ä¸ªæ³›å‹ç±»å‹`IsString`ï¼Œæ ¹æ®`T`çš„ç±»å‹åˆ¤æ–­è¿”å›å…·ä½“ç±»å‹æ˜¯`true`è¿˜æ˜¯`false`:

```typescript
type IsString<T> = T extends string ? true : false;

type A = IsString<string>; // true
type B = IsString<number>; // false
type C = IsString<"abc">; // true
type D = IsString<123>; // false
```

<br />

ç¤ºä¾‹ï¼šå®ç°ä¸€ä¸ª`IF`ç±»å‹ï¼Œæ¥å—ä¸€ä¸ªæ¡ä»¶ç±»å‹`C`ï¼Œä¸€ä¸ªåˆ¤æ–­ä¸ºçœŸæ—¶è¿”å›çš„ç±»å‹`T`ï¼Œåˆ¤æ–­ä¸ºå‡çš„æ—¶å€™è¿”å›ç±»å‹`F`ã€‚`C`åªèƒ½æ˜¯`true | false`ï¼Œ`T`å’Œ`F`å¯ä»¥æ˜¯ä»»æ„çš„ç±»å‹ï¼š

```typescript
type If<C extends boolean, T, F> = C extends true ? T : F;

type A = If<true, "a", "b">; // a
type B = If<false, "a", "b">; // b
type C = If<true, number, string>; // number
```

<br />

å¯¹äºåŸºç¡€çš„ç±»å‹ï¼Œ`extends`å³ä¾§çš„ç±»å‹åŒ…å«ä½äº`extends`å·¦ä¾§çš„ç±»å‹æ—¶ï¼ˆä¹Ÿå°±æ˜¯ç‹­çª„ç±»å‹`extends`å®½æ³›ç±»å‹ï¼‰ï¼Œç»“æœè¿”å›`true`å¦åˆ™è¿”å›`false`ã€‚

å¦‚æœæ˜¯å¯¹è±¡ç±»å‹å‘¢ï¼Ÿå½“`extends`ä½œç”¨äºå¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚æœå¯¹è±¡ä¸­æŒ‡å®šçš„ Key è¶Šå¤šï¼Œåˆ™å…¶ç±»å‹å®šä¹‰çš„èŒƒå›´è¶Šç‹­çª„ã€‚

```typescript
type Narrow = { a: number; b: string }; // å®šä¹‰äº†ä¸¤ä¸ª key çš„å¯¹è±¡ç±»å‹ï¼Œè¾ƒä¸ºç‹­çª„
type Wide = { a: number };             // åªå®šä¹‰äº†ä¸€ä¸ª key çš„å¯¹è±¡ç±»å‹ï¼Œè¾ƒä¸ºå®½æ³›

type Test1 = Narrow extends Wide ? "yes" : "no"; // "yes"
```

```typescript
type ObjLength = {
  length: number
}

// é™åˆ¶ T å¿…é¡»æ»¡è¶³ ObjLength çº¦æŸ
function getObjLength<T extends ObjLength>(obj: T) { 
  return obj;
}
getObjLength("Hello World");
getObjLength([1, 2, 3]);
getObjLength({ id: 1, length: 2 });
```

å¯¹äºä¸Šé¢çš„å¯¹è±¡çº¦æŸæ¡ˆä¾‹ï¼Œåœ¨æ¡ä»¶ç±»å‹ä¸­åŒæ ·çš„é€‚ç”¨ï¼š

```typescript
// ğŸ¤” type Result = true
type Result = { a: string, b: boolean } extends { a: string } ? true : false;
```

ä¸Šé¢çš„ç±»å‹ä¸­`{ a: string, b: boolean }`å…·æœ‰ä¸¤ä¸ªå±æ€§ï¼Œå±äºç‹­çª„ç±»å‹ã€‚`{ a: string }`å…·æœ‰ä¸€ä¸ªå±æ€§ï¼Œå±äºå®½æ³›ç±»å‹ã€‚å› æ­¤å¯ä»¥è¯´`{ a: string, b: boolean }`æ»¡è¶³`{ a: string }`çš„çº¦æŸï¼Œæ‰€ä»¥è¿”å›`true`ã€‚

<br />

ä¹‹å‰æˆ‘ä»¬å¦‚æœæƒ³è¦è·å–ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ç±»å‹å¯ä»¥å†™æˆä¸‹é¢çš„æ–¹å¼ï¼š

```typescript
type Message<T extends { message: unknown }> = T["message"];

const person = {
    id: 1,
    message: "hello"
};

// ğŸ¤” type PersonMessage = string
type PersonMessage = Message<typeof person>;
```

å¦‚æœä¼ é€’ç»™`Message`çš„å¯¹è±¡æ²¡æœ‰`message`è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆä»£ç å°±ä¼šäº§ç”ŸæŠ¥é”™ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¡ä»¶ç±»å‹æ¥è·å–ä¸€ä¸ªé»˜è®¤çš„ç±»å‹ï¼š

```typescript
type Message<T> = T extends { message: unknown } ? T["message"] : never;

const person = {
    id: 1
};

// ğŸ¤” type PersonMessage = never
type PersonMessage = Message<typeof person>; 
```

<br />

æˆ–è€…å¯ä»¥æ ¹æ®æ–¹æ‹¬å·è¿ç®—ç¬¦çš„ç‰¹ç‚¹ï¼Œç›´æ¥è·å–æ•°ç»„çš„ç±»å‹ï¼š

```typescript
type Flatten<T> = T extends any[] ? T[number] : T;

// ğŸ¤” type Str = string
type Str = Flatten<string[]>; 
// ğŸ¤” type Num = number
type Num = Flatten<number[]>; 
```

```typescript
const arr = [
    { id: 1, name: "aaa" },
    { id: 2, name: "bbb" },
    { id: 3, name: "ccc" }
];

// å¾—åˆ°å¯¹è±¡å­—é¢é‡ç±»å‹ {id: number, name: string}
type A = Flatten<typeof arr>;
```

<br />

éš¾åº¦å‡çº§ï¼ŒTS çš„æ¡ä»¶ç±»å‹ä¹Ÿå¯ä»¥è¿›è¡ŒåµŒå¥—ï¼š

```typescript
type GetType<T> = T extends string
    ? "string"
    : T extends number
      ? "number" 
      : "unknown";

type A = GetType<"Hello">; // string
type B = GetType<123>; // number
type C = GetType<true>; // unknown
```

<br />

æœ€åæˆ‘ä»¬å®ç°ä¸€ä¸ªæ³›å‹å·¥å…·`Merge`ï¼Œå°†ä¸¤ä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ï¼Œç¬¬äºŒä¸ªç±»å‹çš„é”®ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªç±»å‹çš„é”®ï¼š

```typescript
type Merge<F, S> = {
    // éå†æ‰€æœ‰çš„ key,è”åˆç±»å‹é»˜è®¤ä¼šå»é‡
    [key in keyof F | keyof S]: key extends keyof S // å¦‚æœ key åŒ…å«åœ¨ keyof S ä¸­
        ? S[key] // ç›´æ¥å–åè€…çš„å€¼çš„ç±»å‹ï¼Œä¿è¯åè€…ç±»å‹è¦†ç›–å‰è€…
        : key extends keyof F // å¦‚æœæ˜¯å‰è€…çš„å±æ€§
            ? F[key] // è¿”å›å‰è€…çš„ç±»å‹
            : never; // ä¸ä¼šèµ°åˆ°è¿™ä¸€æµç¨‹
};
```

```typescript
// è°ƒç”¨

type foo = {
    name: string;
    age: string;
};

type bar = {
    age: number;
    sex: string;
};

type Result = Merge<foo, bar>;

/* 
    type Result = {
        name: string;
        age: number;
        sex: string;
    }
*/
```

