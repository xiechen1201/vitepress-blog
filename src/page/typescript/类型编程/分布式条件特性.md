ã€Œæ¡ä»¶ç±»å‹ã€å†ç»“åˆã€Œè”åˆç±»å‹ã€+ã€Œæ³›å‹ã€ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šè§¦å‘ã€Œåˆ†å¸ƒå¼æ¡ä»¶ç‰¹æ€§ã€ã€‚

![alt text](./imgs/image.png)

æˆ‘ä»¬ä¹‹å‰å†™è¿‡ä¸€ä¸ª`IsString`çš„ç±»å‹å·¥å…·ï¼š

```typescript
type IsString<T> = T extends string ? true : false;

type A = IsString<string>; // true
type B = IsString<number>; // false
type C = IsString<"abc">; // true
type D = IsString<123>; // false
```

å¦‚æœæˆ‘ä»¬ä¼ é€’ç»™`IsString`çš„æ˜¯ä¸€ä¸ªè”åˆç±»å‹ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘åˆ†å¸ƒå¼ç‰¹æ€§ã€‚

```typescript
type IsString<T> = T extends string ? 1 : 2;
// ğŸ¤” type E = 1 | 2
type E = IsString<"a" | true | 1>; 
```

è§¦å‘åˆ†å¸ƒå¼ç‰¹æ€§åå¾—åˆ°çš„æ˜¯ä¸€ä¸ªè”åˆç±»å‹ï¼Œå°±ç›¸å½“äºæ˜¯`"a" | true | 1`ä¾æ¬¡å’Œ`extends string`è¿›è¡Œå…¼å®¹æ¯”è¾ƒã€‚

å¦‚æœæ¡ä»¶ç±»å‹è¿”å›çš„`true | false`ï¼Œé‚£ä¹ˆå¾—åˆ°çš„å…¶å®æ˜¯ä¸€ä¸ª`boolean`ç±»å‹ï¼Œè€Œä¸æ˜¯è”åˆç±»å‹ï¼š

```typescript
type IsString<T> = T extends string ? 1 : 2;
// ğŸ¤” type F = boolean
type F = IsString<"a" | true | 1>; 
```

<br />

æˆ‘ä»¬å¯ä»¥å†™çš„æ›´åŠ çµæ´»ä¸€ç‚¹ï¼Œå°†`string`ä¹ŸæŠ½ç¦»ä¸ºä¸€ä¸ªæ³›å‹ï¼š

```typescript
type MyInclude<T, U> = T extends U ? T : never;

type A = "a" | "b" | "c";
type B = "a" | "b";
type C = MyInclude<A, B>; // "a" | "b"
```

å…¶å®`MyInclude`å°±ç›¸å½“äºåšäº†ä¸‹é¢çš„æ“ä½œï¼š

```typescript
type C = MyInclude<"a", "a" | "b"> | MyInclude<"b", "a" | "b"> | MyInclude<"c", "a" | "b">;

// æ›¿æ¢ä¸ºæ›´åŠ å…·ä½“çš„ç±»å‹ï¼Œæ–¹ä¾¿ç†è§£

type C = ("a" extends "a" | "b" ? "a" : never)
	| ("b" extends "a" | "b" ? "b" : never)
	| ("c" extends "a" | "b" ? "c" : never);
```

æ‰€ä»¥æœ€ç»ˆå¾—åˆ°çš„ç»“æœå…¶å®æ˜¯ï¼š

```typescript
type C = "a" | "b" | never;
```

åªä¸è¿‡æœ€åæ ¹æ®`never`çš„ç‰¹æ€§ï¼ˆä»»ä½•å€¼éƒ½ä¸èƒ½èµ‹å€¼ç»™`never`ï¼‰ç›´æ¥è¢«ç§»é™¤äº†ã€‚

ä¸Šé¢çš„`MyInclude`ç¤ºä¾‹ä¹Ÿå¯ä»¥å°†`T`å’Œ`never`çš„ä½ç½®äº’æ¢ä¸€ä¸‹ï¼Œå¾—åˆ°ä¸€ä¸ªæ’é™¤çš„æ•ˆæœï¼š

```typescript
type MyExclude<T, U> = T extends U ? never : T;

type A = "a" | "b" | "c";
type B = "a" | "b";
type C = MyExclude<A, B>; // c
```

<br />

æˆ‘ä»¬å®ç°çš„`MyInclude`å’Œ`MyExclude`å…¶å®å°±æ˜¯å®˜æ–¹å·¥å…·ç±»å‹`Exclude<UnionType, ExcludedMembers>`å’Œ`Extract<Type, Union>`çš„å®ç°æ–¹å¼ã€‚

`Exclude`å’Œ`Extract`æ­é…ä¸Š`Pick`è¿˜èƒ½å®ç°å‡ºå’Œ`Pick`å·¥å…·ç›¸åçš„æ•ˆæœã€‚

```typescript
// MyOmit å…ˆå°† T ä¸­ K çš„å±æ€§ç§»é™¤æ‰ï¼Œå¾—åˆ° "name"
// ç„¶ååœ¨è°ƒç”¨ Pick<T, "name"> è·å– name å±æ€§çš„ç±»å‹
type MyOmit<T, K extends keyof any> = Pick<T, Exclude<keyof T, K>>;

type Foo = {
    name: string;
    age: number;
};

type Bar = MyOmit<Foo, "age">; //{ name: string }
```

å…¶å®`MyOmit`çš„å®ç°ï¼Œå…¶å®å°±æ˜¯å®˜æ–¹å·¥å…·ç±»å‹`Omit<Type, Keys>`çš„å®ç°ã€‚

<br />

æˆ‘ä»¬ä¹Ÿå¯ä»¥åšä¸ªå·¥å…·æ¥ç»ƒä¹ ä¸€ä¸‹å®˜æ–¹çš„ç±»å‹å·¥å…·ï¼Œä¾‹å¦‚ä¸‹é¢çš„å¯¹è±¡å­—é¢é‡ç±»å‹ï¼š

```typescript
type User = {
    id: number;
    name: string;
    age: number;
    tel: string;
    address: string;
};
```

æˆ‘å¸Œæœ›å®ç°ä¸€ä¸ªç±»å‹å·¥å…·ï¼Œå¯ä»¥å°†é€‰æ‹©çš„é”®åè®¾ç½®ä¸ºå¯é€‰çš„å±æ€§ï¼Œä¾‹å¦‚å°†`tel`å’Œ`address`è®¾ç½®ä¸ºå¯é€‰çš„å±æ€§ï¼š

```typescript
type User = {
    id: number;
    name: string;
    age: number;
    tel?: string;
    address?: string;
};
```

å¦‚ä½•åšå‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬åº”è¯¥è¿‡æ»¤å‡ºå“ªäº›æ˜¯å¿…é€‰çš„å±æ€§ï¼Œå“ªäº›æ˜¯å¯é€‰çš„å±æ€§ã€‚è¦å¾—åˆ°å¿…é¡»çš„å±æ€§ï¼Œé‚£æˆ‘ä½¿ç”¨`Omit`è¿™ä¸ªå·¥å…·ç±»å‹å°†å¯é€‰çš„ç±»å‹æ’é™¤å‡ºå»ï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªæ–°çš„ç±»å‹ä¸å°±å¯ä»¥äº†å˜›ï¼š

```typescript
type RequiredPick = Omit<User, "tel" | "address">;

/*
  type RequiredPick = {
      id: number;
      name: string;
      age: number;
  }
*/
```

æˆ‘å¯ä»¥ä½¿ç”¨`Pick`æ¥æ ¹æ®ä¼ å…¥çš„ Keys è·å–å¯¹è±¡æŒ‡å®šçš„ Keys å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç±»å‹ï¼š

```typescript
type OptionalPick = Pick<User, "tel" | "address">;

/*
  type OptionalPick = {
      tel: string;
      address: string;
  }
*/
```

æœ€åå†ä½¿ç”¨`Partial`è¿™ä¸ªå·¥å…·ç±»å‹å°†`OptionalPick`çš„ç±»å‹å…¨éƒ¨è®¾ç½®ä¸ºå¯é€‰çš„å±æ€§ï¼š

```typescript
type PartialPick = Partial<OptionalPick>;

/*
  type PartialPick = {
      tel?: string | undefined;
      address?: string | undefined;
  }
*/
```

æœ€åå°†`RequiredPick`å’Œ`PartialPick`ä¸¤ä¸ªç±»å‹è¿›è¡Œäº¤å‰å³å¯:

```typescript
type FinalPick = RequiredPick & PartialPick;

const user: FinalPick = {
    id: 1,
    name: "zhangsan",
    age: 18,
};
```

æœ€åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³›å‹æ¥æŠŠè¿™ä¸ªæ¡ˆä¾‹è¿›è¡Œä¼˜åŒ–ä¸€ä¸‹ï¼Œè®©å…¶æ›´åŠ çš„é€šç”¨ï¼š

```typescript
type OptionalPick<T, K extends keyof T> = 
  Omit<T, K> & Partial<Pick<T, K>>; 

const user: OptionalPick<User, "tel" | "address"> = {
    id: 1,
    name: "zhangsan",
    age: 18,
};
```

å…¶å®å¯ä»¥æŠŠ TS çš„ç±»å‹å·¥å…·ç±»æ¯”ä¸º JS çš„å‡½æ•°ï¼Œ`Omit`â€œå‡½æ•°â€æ˜¯ç”¨æ¥ç§»é™¤å±æ€§çš„ï¼Œ`Partial`â€œå‡½æ•°â€æ˜¯ç”¨æ¥å°†å±æ€§è½¬æ¢ä¸ºå¯é€‰å±æ€§çš„ï¼Œ`Pick`â€œå‡½æ•°â€æ˜¯ç”¨æ¥æå–å±æ€§çš„ã€‚

<br />

æœ€åï¼Œè¿˜éœ€è¦å¼ºè°ƒä¸€ä¸‹è§¦å‘åˆ†å¸ƒå¼æ¡ä»¶ç±»å‹éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š

1ã€ç±»å‹å‚æ•°éœ€è¦é€šè¿‡åçœå‚æ•°çš„æ–¹å¼ä¼ å…¥ï¼Œå†™æ­»æ˜¯ä¸è¡Œçš„

```typescript
// å§‹ç»ˆéƒ½æ˜¯ "no"
type A = string | number | boolean extends string | number ? "yes" : "no";  
```

2ã€ç±»å‹å‚æ•°éœ€è¦æ˜¯ä¸€ä¸ªæ³›å‹ï¼Œå¹¶ä¸”æ¡ä»¶ç±»å‹ä¸­çš„æ³›å‹å‚æ•°ä¸èƒ½è¢«åŒ…è£¹ã€‚

```typescript
type B<T> = T extends any ? T[] : never;
type C<T> = [T] extends any ? T[] : never;

type D = B<string | number>;  // string[] | number[]
type E = C<string | number>;  // (string | number)[]
```