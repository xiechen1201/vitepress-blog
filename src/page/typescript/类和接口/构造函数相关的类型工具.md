1ã€`ConstructorParameters<Type>`æ˜¯ä»æ„é€ å‡½æ•°ç±»å‹ä¸­è·å–æ„é€ å‡½æ•°å‚æ•°çš„å…ƒç»„ç±»å‹ï¼Œ[è¯¦è§](https://www.typescriptlang.org/docs/handbook/utility-types.html#constructorparameterstype)ã€‚

```typescript
class User {
  constructor(public id: number, public name: string) {}
}

type ConstructorParamsType1 = ConstructorParameters<typeof User>; // [id: number, name: string]
```

å¯¹äº`ConstructorParameters`çš„å®ç°å…¶å®å’Œä¹‹å‰çš„`ReturnType`ååˆ†ç±»ä¼¼ï¼Œåªä¸è¿‡ç°åœ¨æˆ‘ä»¬éœ€è¦æ„é€ å‡½æ•°ç±»å‹å»å¤„ç†ï¼š

```typescript
// è‡ªå·±å®ç°
type MyConstructorParams<T extends abstract new (...args: any[]) => any> = T extends abstract new (...args: infer R) => any ? R : never;

type ConstructorParamsType2 = MyConstructorParams<typeof User>;
```

æˆ‘ä»¬è¿˜å¯ä»¥æ‹“å±•ä¸€ä¸ªåœºæ™¯å®ç°ä¸€ä¸‹æ•ˆæœï¼š

```typescript
class Book {
    title: string;
    content?: string;
    constructor(title: string) {
        this.title = title;
    }
}
class CreateInstance<T extends new (...args: any[]) => any> {
    private ClassConstructor: T;
    constructor(classConstructor: T) {
        this.ClassConstructor = classConstructor;
    }

    // è·å–æ„é€ å‡½æ•° T çš„æ„é€ å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ„é€ å‡½æ•° T çš„å®ä¾‹å¯¹è±¡ç±»å‹
    getInstance(...args: ConstructorParameters<T>): InstanceType<T> {
        return new this.ClassConstructor(...args);
    }
}

const instanceCreator = new CreateInstance(Book);
const book = instanceCreator.getInstance("Typescriptç±»å‹å…¨è§£");
```

<br />

2ã€å¦å¤–å’Œæ„é€ å‡½æ•°ç›¸å…³çš„å·¥å…·ç±»å‹å°±æ˜¯`InstanceType<Type>`ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°ç±»å‹å¾—åˆ°å®ä¾‹å¯¹è±¡ç±»å‹ã€‚

```typescript
class User {
    constructor(public id: number, public name: string) {}
}
// ğŸ¤” type U = InstanceType<typeof User>;
type U = InstanceType<typeof User>;
```

è¦å®ç°è¿™ä¸ªå·¥å…·ç±»å‹ä¹Ÿå¾ˆç®€å•ï¼š

```typescript
type MyInstanceType<T extends abstract new (...args: any[]) => any> =
    T extends abstract new (...args: any[]) => infer R ? R : never;

type InstanceUser = MyInstanceType<typeof User>;
```

åœ¨ TS ä¸­å¦‚æœæˆ‘ä»¬æƒ³å®ç°ä¸€ä¸ªç±»åƒä¸‡ä¸è¦åœ¨ä½¿ç”¨ JS å‡½æ•°é‚£æ ·çš„æ–¹å¼ï¼Œè€Œæ˜¯ä½¿ç”¨ç±»ï¼š

```typescript
function Person(this: any, id: number, name: string, age: number) {
    this.id = id;
    this.name = name;
    this.age = age;
}

new Person(1, 'John', 30); // âŒ å…¶ç›®æ ‡ç¼ºå°‘æ„é€ ç­¾åçš„ "new" è¡¨è¾¾å¼éšå¼å…·æœ‰ "any" ç±»å‹
```

è¿™æ˜¯å› ä¸ºå‡½æ•°æ˜¯å…·æœ‰äºŒä¹‰æ€§çš„ï¼Œå› æ­¤ ES6 æ‰æœ‰äº†ç®­å¤´å‡½æ•°å’Œç±»çš„åŒºåˆ†ï¼Œåˆ°äº† TS ä¸­è¿™ç§é™åˆ¶æ›´åŠ çš„ä¸¥æ ¼ã€‚

<br />

3ã€`Awaited<Type>`ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„ç±»å‹å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥è·å–`Promise`ä¸­çš„ç±»å‹ï¼ˆå¦‚`await`ã€`then`æ–¹æ³•æ”¾å›çš„è¢«`Promise`åŒ…è£¹çš„æ•°æ®ç±»å‹ï¼‰ã€‚

å…¶ä¸­`Promise`æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„å¼‚æ­¥ç±»ï¼Œæœ¬èº«å°±æœ‰`Promise`ç±»å‹å’Œ`PromiseConstructor`ç±»å‹ã€‚

```typescript
type Person = {
    id: number;
    name: string;
    age: number;
};

type T = Awaited<Promise<Person>>;

/* 
    type T = {
        id: number;
        name: string;
        age: number;
    }
*/
```

`Awaited<Type>`åœ¨æˆ‘ä»¬å¤„ç†å¼‚æ­¥çš„æ—¶å€™éå¸¸çš„æœ‰ç”¨ï¼Œä¾‹å¦‚æˆ‘ä»¬ä»å‘èµ·ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œå¾—åˆ°ç»“æœå¾€å¾€æ˜¯`Promise`ç±»å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡`Awaited<Type>`æ¥å¸®æˆ‘ä»¬è·å–å‡½æ•°è¿”å›`Promise`ç±»å‹çš„æ³›å‹ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£çš„æ•°æ®ç±»å‹ï¼š

```typescript
interface User {
    id: number;
    firstName: string;
    lastName: string;
    age: number;
}

async function fetchUser(): Promise<User> {
    const data = await fetch("https://mock.example.com/1234567")
        .then((res) => res.json());
    return data;
}
```

å½“æˆ‘ä»¬è°ƒç”¨`fetchUser()`æ–¹æ³•åå¸Œæœ›æ‹¿åˆ°`User`è¿™ä¸ªç±»å‹ï¼Œå°±å¯ä»¥ä½¿ç”¨`Awaited<Type>`ï¼š

```typescript
type UserFetch = Awaited<ReturnType<typeof fetchUser>>;

const user: UserFetch = {
    id: 1,
    firstName: "yuan",
    lastName: "jin",
    age: 18
};
```

<br />

`Awaited<Type>`çš„åº•å±‚å®ç°ä¹Ÿæ¯”è¾ƒçš„å¤æ‚ï¼š

```typescript
type Awaited<T> = T extends null | undefined ? T : // å½“Tæ˜¯null | undefinedæ—¶å°±ç›´æ¥å–å€¼
    T extends object & { then(onfulfilled: infer F, ...args: infer _): any; } ? // `await` ä»…ä½¿ç”¨å¯è°ƒç”¨çš„ `then` æ¥è§£åŒ…å¯¹è±¡ç±»å‹ã€‚ éå¯¹è±¡ç±»å‹ä¸ä¼šè¢«è§£åŒ…
        F extends ((value: infer V, ...args: infer _) => any) ? // å¦‚æœâ€œthenâ€çš„å‚æ•°æ˜¯å¯è°ƒç”¨çš„ï¼Œåˆ™æå–ç¬¬ä¸€ä¸ªå‚æ•°
            Awaited<V> : // é€’å½’è°ƒç”¨Awaitedï¼Œå°†è§£å¼€çš„ç±»å‹Vä¼ å…¥
        never : // `then` çš„å‚æ•°ä¸å¯è°ƒç”¨è·å–never
    T; // ä¸æ˜¯å¯¹è±¡ç±»å‹æˆ–è€…æ²¡æœ‰thençš„æ—¶å€™ç›´æ¥è·å–Tç±»å‹
```

æ ¹æ®ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œ`Awaited<Type>`å¯ä»¥æ·±å±‚åµŒå¥—ï¼Œå¦‚æœæ²¡æœ‰`Promise`çš„è¯ï¼Œå°±ç›´æ¥è¿”å›ç±»å‹ï¼š

```typescript
type A = Awaited<Promise<string>>; // string
  
type B = Awaited<Promise<Promise<number>>>; // number
    
type C = Awaited<boolean | Promise<number>>; // number | boolean

type D = Awaited<number>; // number 

type E = Awaited<null>; // null
```